%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Diese tex-Datei kompilieren, Vorgaben können so übernommen werden %%
%% Diese tex-Datei anpassen:                                         %%
%% 1. Kopf- und Fußzeile definieren                                  %%
%% 2. Counter anpassen: Überschrift, Seite, Gleichung                %%
%% 3. Kapitel (tex-Dateien) einfügen mit \input{}                    %%
%%(4. neue Kommandos können zu den bestehenden in der Präambel hinzu-%%
%%    gefügt werden)                                                 %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Präambel                                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{Praeambel}

\usepackage[nowarnings]{xcookybooky}											   % Rezepte typesetten

\setRecipeColors{
	recipename = petrol,
	ing = black,
	inghead = sundown,
	prep = black,
	prephead = sundown,
	suggestion = black,
	suggestionhead = petrol,
	separationgraph = petrol,
	hint = sand,
	hinthead = sundown,
	hintline = sundown,
	numeration = sundown,
}

\setRecipeLengths{
	pictureheight = 0.2\textheight,
	bigpicturewidth = 0.55\textwidth, % ratio: pw/ph = 11/4
	smallpicturewidth = 0.35\textwidth, % ratio: pw/ph = 7/4
	introductionwidth = 0.75\textwidth,
	preparationwidth = 0.55\textwidth,
	ingredientswidth = 0.35\textwidth,
}

\setRecipeSizes{
	recipename = \Huge,
	intro = \normalsize,
	ing = \normalsize,
	inghead = \Large,
	prephead = \Large,
	suggestion = \normalsize,
	hint = \large,
	hinthead = \Large,
}

% \usepackage{emerald}
% \setRecipenameFont{fwb}{T1}{m}{n}

\setRecipenameFont{\sfdefault}{T1}{b}{n}

\setHeadlines{
	inghead = Zutaten,
	prephead = Zubereitung,
	hinthead = Anmerkung,
	continuationhead = { },
	continuationfoot = { },
	portionvalue = Portion(en),
	calory = Energie,
}


% updated package implementations
\renewcommand{\step}
{%
    \stepcounter{step}%
    \lettrine
    [%
        lines=2,
        lhang=0,          % space into margin, value between 0 and 1
        loversize=0.1,   % enlarges the height of the capital
        slope=0em,
        findent=0.75em,      % gap between capital and intended text
        nindent=0em       % shifts all intended lines, begining with the second line
    ]{\thestep}{}%
}

\renewcommand{\sectionmark}[1]
{
	\markright{\MakeUppercase{\thesection.\ #1}}
}
\setlength{\evensidemargin}{0cm}
\setlength{\oddsidemargin}{0cm}
\setlength{\textheight}{23.0cm}
% lange Zutatenliste:
% https://stackoverflow.com/questions/64688876/using-xcookybooky-in-latex-i-have-many-ingredients-but-it-does-go-into-the-nex



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Counter setzen                                                    %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\setcounter{section}{1}												% starte mit anderer Überschrift-Nr. (+1)
\setcounter{page}{0}													% starte mit anderer Seitenzahl

% Rezepte Zählen
\newcounter{recipeCntr}
\setcounter{recipeCntr}{0}


\setcounter{secnumdepth}{0}
\setcounter{tocdepth}{3}
\renewcommand{\recipesection}[2][]
{
	\subsection[#1]{#2}
}

\newcommand{\sectionwithtoc}[1]{
	\section{#1}
	\secttoc
}

% Rezept auf gleicher Seite starten (single page)
\newenvironment{recipeSP}{\stepcounter{recipeCntr}\begin{recipe}}{\end{recipe}}
% Rezept auf neuer Seite starten (double page)
\newenvironment{recipeDP}{\clearpage\stepcounter{recipeCntr}\begin{recipe}}{\end{recipe}}

% Neue, nicht getestete Rezepte
\newenvironment{recipeToTest}{
	\stepcounter{recipeCntr}
	{noch testen!} \\
		\begin{tikzpicture}
			\filldraw [fill=sundown,draw=sundown] (0,0) rectangle (15,0.3);
		\end{tikzpicture}\\
	\begin{recipe}
}{
	\end{recipe}
		\begin{tikzpicture}
			\filldraw [fill=sundown,draw=sundown] (0,0) rectangle (15,0.3);
		\end{tikzpicture}
}
\newenvironment{recipeDPToTest}{\clearpage\begin{recipeToTest}}{\end{recipeToTest}}

% \newcommand{\partwithtoc}[1]{
% 	\part{#1}
% 	\parttoc
% }

% \SI[parse-numbers = false]{\nicefrac{1}{2}}{\Ta} &

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Dokument                                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
	\input{Deckblatt}
	\input{Vorwort}
	\input{Verzeichnisse}

	\clearpage
	\cleardoublepage
	\part{Frühstück}
		\sectionwithtoc{Zerealien}
			\input{Frühstück/Zerealien/Porridge/Porridge}


	\clearpage
	\cleardoublepage
	\part{Vorspeisen und Beilagen}
		\sectionwithtoc{Salate} % und Dressing
			\input{Vorspeisen_und_Beilagen/Salate/Kartoffel-Radieschen-Salat/Kartoffel-Radieschen-Salat}
			\input{Vorspeisen_und_Beilagen/Salate/Asiatischer_Krautsalat/Asiatischer_Krautsalat}
			\input{Vorspeisen_und_Beilagen/Salate/Bohnensalat/Bohnensalat}
			\input{Vorspeisen_und_Beilagen/Salate/Rotkohlsalat/Rotkohlsalat}
	\clearpage
		\sectionwithtoc{Aufstriche und Dips}
			\input{Vorspeisen_und_Beilagen/Aufstriche_und_Dips/Mayonnaise/Mayonnaise}
			\input{Vorspeisen_und_Beilagen/Aufstriche_und_Dips/Hummus/Hummus}
			\input{Vorspeisen_und_Beilagen/Aufstriche_und_Dips/Salsa/Salsa}


	\clearpage
	\cleardoublepage
	\part{Hauptgerichte}
		\sectionwithtoc{Aufläufe} % Ofengerichte
			\input{Hauptgerichte/Auflaeufe/Linsen_Moussaka/Linsen_Moussaka}
			\input{Hauptgerichte/Auflaeufe/Kichererbsen-Nudelauflauf/Kichererbsen-Nudelauflauf}
	\clearpage
		\sectionwithtoc{Suppen und Eintöpfe}
			\input{Hauptgerichte/Suppen_und_Eintoepfe/Bunter_Kichererbseneintopf/Bunter_Kichererbseneintopf}
			\input{Hauptgerichte/Suppen_und_Eintoepfe/Kuerbisrisotto/Kuerbisrisotto}
			\input{Hauptgerichte/Suppen_und_Eintoepfe/Rote_Linsen_Curry/Rote_Linsen_Curry}
			\input{Hauptgerichte/Suppen_und_Eintoepfe/Pilzsuppe/Pilzsuppe}
	\clearpage
		\sectionwithtoc{Nudel-Gerichte}
			\input{Hauptgerichte/Nudelgerichte/Lazy_Noodles/Lazy_Noodles}
			\input{Hauptgerichte/Nudelgerichte/Brokkoli_und_Kicherebsen/Brokkoli_und_Kicherebsen.tex}
			\input{Hauptgerichte/Nudelgerichte/Tortellini_in_Tomatensoße/Tortellini_in_Tomatensoße}
	\clearpage
		\sectionwithtoc{Pfannen-Gerichte}
			\input{Hauptgerichte/Pfannengerichte/Tofu_in_Erdnusssosse/Tofu_in_Erdnusssosse}
			\input{Hauptgerichte/Pfannengerichte/Kartoffel-Zucchini-Bratlinge/Kartoffel-Zucchini-Bratlinge}
			\input{Hauptgerichte/Pfannengerichte/Wuerziger_Kichererbsenburger/Wuerziger_Kichererbsenburger}
	\clearpage
		\sectionwithtoc{Fingerfood}
			\input{Hauptgerichte/Fingerfood/Tortilla-Couscous-Röllchen/Tortilla-Couscous-Röllchen}


	\clearpage
	\cleardoublepage
	\part{Nachspeisen und Snacks}
		\sectionwithtoc{Nachspeisen}
			\input{Nachspeisen_und_Snacks/Nachspeisen/Glutenfreie_Waffeln/Glutenfreie_Waffeln}
	\clearpage
		\sectionwithtoc{Snacks}
			\input{Nachspeisen_und_Snacks/Snacks/Snickers-Datteln/Snickers-Datteln}


	\clearpage
	\cleardoublepage
	\part{Gebäck}
		\sectionwithtoc{Brote}
			\input{Gebaeck/Brote/Bananenbrot/Bananenbrot}
			\input{Gebaeck/Brote/Mediterranes_Baguette/Mediterranes_Baguette}
	\clearpage
		\sectionwithtoc{Brötchen}
	\clearpage
		\sectionwithtoc{Kekse}
			\input{Gebaeck/Kekse/Johannisbeerlebkuchen/Johannisbeerlebkuchen}
			\input{Gebaeck/Kekse/Rosmarin-Heidesand/Rosmarin-Heidesand}
			\input{Gebaeck/Kekse/Lussekatter/Lussekatter}
			\input{Gebaeck/Kekse/Kokosmakronen/Kokosmakronen}
	\clearpage
		\sectionwithtoc{Kuchen}
			\input{Gebaeck/Kuchen/Lebkuchen-Brownies/Lebkuchen-Brownies}
			\input{Gebaeck/Kuchen/Apfel-Knusper-Muffins/Apfel-Knusper-Muffins}


	\clearpage
	\cleardoublepage
	\part{Getränke}
		\sectionwithtoc{Alkoholische Getränke}
			\input{Getraenke/alkoholische_Getraenke/Malibu_Pina_Colada/Malibu_Pina_Colada}
			\input{Getraenke/alkoholische_Getraenke/Malibu_Sun_Splash/Malibu_Sun_Splash}
	\clearpage
		\sectionwithtoc{Nicht-alkoholische Getränke}


	\clearpage
	\pagestyle{plain}
	\addcontentsline{toc}{part}{Stichwortverzeichnis}
	\indexprologue{Insgesamt\:\therecipeCntr\:Rezepte enthalten die folgende Begriffe. Es werden nur markante Zutaten oder Schlagworte referenziert, die Entscheidung, welche Inhalte referenziert werden, ist dabei eher subjektiv; erfolgt aber nach Maßgaben der Relevanz und der Interessanz.}
	\printindex


		% \begin{recipeDP}
		%     [
		%         preparationtime = {\SI{15}{\minute}},
		%         bakingtime = {\SI{12}{\minute} bis \SI{15}{\minute}},
		%         bakingtemperature = {\protect\bakingtemperature{fanoven=\SI{180}{\celsius}}},
		%         portion = {40 Stück},
		%         source = {Stina Spiegelberg}
		%     ]
		%     {Name}
		%
		%     % \graph
		%     %     {
		%     %         big=example-image
		%     %         small=Small.jpg
		%     %     }
		%
		%     % \introduction{einleitung}
		%
		%     \ingredients{
		%
		%     }
		%
		%     \preparation{
		%         \step
		%     }
		%
		%     \suggestion[Title of Suggestion]{
		% 		Suggestion
		%     }
		%
		%     \hint{Hint}
		%
		% \end{recipeDP}

\end{document}
